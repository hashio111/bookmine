.container
  .nav{aria: {label: "breadcrumb"}}
    %ol.breadcrumb.bg-transparent
      %li.breadcrumb-item
        = link_to root_path do
          %i.fas.fa-home
      %li.breadcrumb-item
        = link_to new_product_path do
          本を探す
      %li.breadcrumb-item
        = link_to product_path(@product) do
          本の詳細
      %li.breadcrumb-item.active{aria: {current: "page"}}
        口コミ投稿
  %h2.text-center 口コミを投稿する

  .row.justify-content-center
    .col-sm-10.col-md-3.mb-3
      .card.bg-light
        .card-image.mx-auto.my-2
          = image_tag(@product.image_url, class: "rounded border")
        .card-body.bg-white.border-top.text-center
          - if user_signed_in?
            - if current_user.products.where(id: @product.id).length == 0
              = form_with url: likes_path, method: :post, local: true do |f|
                = f.hidden_field :product_id, value: @product.id
                = f.submit "お気に入り登録", class: "btn btn-outline-success"
            - else
              = form_with url: like_path(@product), method: :delete, local: true do |f|
                = f.submit "お気に入り登録中", class: "btn btn-success"
          - else
            = link_to "お気に入り登録", new_user_session_path, class: "btn btn-outline-success"
        .card-footer.bg-white.text-center
          = link_to new_post_product_path, class: "btn btn-outline-primary" do
            口コミを投稿する

    .col.col-sm-12.col-md-6
      = form_with url: posts_path, method: :post, local: true do |f|
        .form-group
          = f.label :title, "タイトル"
          = f.text_field :title, class: "form-control"
        .form-group#star
          = f.label :rate, "評価"
          = f.hidden_field :rate, id: :review_star
        .form-group
          = f.label :content, "内容"
          = f.text_area :content, class: "form-control", rows: "8", placeholder: "口コミを書いてみましょう。タイトルと評価のみでも投稿できます。"